<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exerc√≠cios MongoDB e Neo4j - Teoria e Pr√°tica</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #e8e8e8;
      margin: 0;
      padding: 2rem;
      line-height: 1.7;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 3rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    h1 {
      font-size: 3rem;
      text-align: center;
      margin-bottom: 1rem;
      background: linear-gradient(45deg, #00d4ff, #00ffaa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .subtitle {
      text-align: center;
      color: #a8d8ff;
      font-size: 1.2rem;
      margin-bottom: 3rem;
    }
    
    h2 {
      color: #00d4ff;
      font-size: 2rem;
      margin-top: 3rem;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid rgba(0, 212, 255, 0.3);
    }
    
    h3 {
      color: #00ffaa;
      font-size: 1.5rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    
    h4 {
      color: #60d9ff;
      font-size: 1.2rem;
      margin-top: 1.5rem;
      margin-bottom: 0.8rem;
    }
    
    .section {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 15px;
      padding: 2rem;
      margin: 2rem 0;
      border-left: 4px solid #00d4ff;
    }
    
    .exercise {
      background: rgba(0, 255, 170, 0.05);
      border-radius: 10px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border-left: 3px solid #00ffaa;
    }
    
    .theory-question {
      background: rgba(0, 212, 255, 0.05);
      border-radius: 10px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border-left: 3px solid #00d4ff;
    }
    
    pre {
      background: #1e1e1e;
      color: #e8e8e8;
      padding: 1.5rem;
      border-radius: 10px;
      overflow-x: auto;
      margin: 1rem 0;
      border: 1px solid rgba(0, 212, 255, 0.2);
    }
    
    code {
      color: #2ecc71;
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
    }
    
    .code-comment {
      color: #6a9fb5;
      font-style: italic;
    }
    
    .badge {
      display: inline-block;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .badge-easy {
      background: rgba(0, 255, 170, 0.2);
      color: #00ffaa;
      border: 1px solid #00ffaa;
    }
    
    .badge-medium {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
      border: 1px solid #ffc107;
    }
    
    .badge-hard {
      background: rgba(255, 87, 87, 0.2);
      color: #ff5757;
      border: 1px solid #ff5757;
    }
    
    .badge-mongodb {
      background: rgba(0, 237, 100, 0.2);
      color: #00ed64;
      border: 1px solid #00ed64;
    }
    
    .badge-neo4j {
      background: rgba(0, 139, 220, 0.2);
      color: #008bdc;
      border: 1px solid #008bdc;
    }
    
    .badge-both {
      background: rgba(138, 43, 226, 0.2);
      color: #b87cff;
      border: 1px solid #b87cff;
    }
    
    ul, ol {
      margin: 1rem 0;
      padding-left: 2rem;
    }
    
    li {
      margin: 0.8rem 0;
    }
    
    strong {
      color: #00d4ff;
    }
    
    .highlight {
      background: rgba(0, 255, 170, 0.2);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      color: #00ffaa;
    }
    
    .tip {
      background: rgba(255, 193, 7, 0.1);
      border-left: 4px solid #ffc107;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 5px;
      color: #ffd54f;
    }
    
    .warning {
      background: rgba(255, 87, 87, 0.1);
      border-left: 4px solid #ff5757;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 5px;
      color: #ff8a8a;
    }
    
    .footer {
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 2px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      color: #a8d8ff;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 10px;
      overflow: hidden;
    }
    
    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    th {
      background: rgba(0, 212, 255, 0.2);
      color: #00d4ff;
      font-weight: bold;
    }
    
    .toc {
      background: rgba(0, 212, 255, 0.05);
      border-radius: 15px;
      padding: 2rem;
      margin: 2rem 0;
    }
    
    .toc a {
      color: #00ffaa;
      text-decoration: none;
      display: block;
      padding: 0.5rem 0;
      transition: all 0.3s ease;
    }
    
    .toc a:hover {
      color: #00d4ff;
      padding-left: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üß† Exerc√≠cios MongoDB e Neo4j</h1>
    <p class="subtitle">Banco de Dados N√£o Relacional - Teoria e Pr√°tica</p>
    
    <!-- √çNDICE -->
    <div class="toc">
      <h3>üìë √çndice</h3>
      <a href="#parte1">Parte 1: Quest√µes Te√≥ricas</a>
      <a href="#parte2">Parte 2: Exerc√≠cios Pr√°ticos MongoDB</a>
      <a href="#parte3">Parte 3: Exerc√≠cios Pr√°ticos Neo4j</a>
      <a href="#parte4">Parte 4: Exerc√≠cios Comparativos e Integrados</a>
      <a href="#gabarito">Gabarito e Explica√ß√µes</a>
    </div>

    <!-- PARTE 1: QUEST√ïES TE√ìRICAS -->
    <div id="parte1" class="section">
      <h2>üìö Parte 1: Quest√µes Te√≥ricas</h2>
      <p>Responda as quest√µes a seguir demonstrando seu conhecimento sobre bancos de dados n√£o relacionais.</p>
      
      <div class="theory-question">
        <h4>Quest√£o 1 - Conceitos Fundamentais</h4>
        <span class="badge badge-easy">F√°cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p><strong>a)</strong> Explique a principal diferen√ßa entre bancos de dados relacionais (SQL) e n√£o relacionais (NoSQL).</p>
        <p><strong>b)</strong> Quais s√£o as 4 principais categorias de bancos NoSQL? D√™ um exemplo de cada.</p>
        <p><strong>c)</strong> Em qual categoria o MongoDB e o Neo4j se encaixam?</p>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 2 - MongoDB: Estrutura de Dados</h4>
        <span class="badge badge-easy">F√°cil</span>
        <span class="badge badge-mongodb">MongoDB</span>
        <p><strong>a)</strong> O que √© um documento no MongoDB? Como ele √© estruturado?</p>
        <p><strong>b)</strong> Qual √© a diferen√ßa entre uma cole√ß√£o e uma tabela SQL?</p>
        <p><strong>c)</strong> Explique o conceito de schema flex√≠vel (schema-less) no MongoDB.</p>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 3 - Neo4j: Modelo de Grafos</h4>
        <span class="badge badge-easy">F√°cil</span>
        <span class="badge badge-neo4j">Neo4j</span>
        <p><strong>a)</strong> Defina o que s√£o n√≥s (nodes) e relacionamentos (relationships) em um banco de grafos.</p>
        <p><strong>b)</strong> O que s√£o labels e propriedades no Neo4j?</p>
        <p><strong>c)</strong> Por que grafos s√£o eficientes para consultas de relacionamentos complexos?</p>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 4 - Agrega√ß√µes no MongoDB</h4>
        <span class="badge badge-medium">M√©dio</span>
        <span class="badge badge-mongodb">MongoDB</span>
        <p><strong>a)</strong> O que √© o Aggregation Pipeline do MongoDB?</p>
        <p><strong>b)</strong> Explique a fun√ß√£o dos seguintes operadores:</p>
        <ul>
          <li><code>$match</code></li>
          <li><code>$group</code></li>
          <li><code>$lookup</code></li>
          <li><code>$project</code></li>
        </ul>
        <p><strong>c)</strong> Qual √© a ordem de execu√ß√£o no pipeline de agrega√ß√£o?</p>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 5 - Cypher vs SQL</h4>
        <span class="badge badge-medium">M√©dio</span>
        <span class="badge badge-neo4j">Neo4j</span>
        <p><strong>a)</strong> O que √© Cypher e para que serve?</p>
        <p><strong>b)</strong> Compare a sintaxe de cria√ß√£o de dados:</p>
        <table>
          <tr>
            <th>SQL</th>
            <th>Cypher</th>
          </tr>
          <tr>
            <td>INSERT INTO</td>
            <td>?</td>
          </tr>
          <tr>
            <td>SELECT ... JOIN</td>
            <td>?</td>
          </tr>
          <tr>
            <td>UPDATE</td>
            <td>?</td>
          </tr>
          <tr>
            <td>DELETE</td>
            <td>?</td>
          </tr>
        </table>
        <p><strong>c)</strong> Quando usar <code>MERGE</code> ao inv√©s de <code>CREATE</code>?</p>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 6 - Casos de Uso</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p><strong>a)</strong> Para cada cen√°rio abaixo, indique qual banco de dados seria mais adequado (MongoDB ou Neo4j) e justifique:</p>
        <ol>
          <li>Sistema de recomenda√ß√£o de produtos baseado em compras de usu√°rios similares</li>
          <li>Cat√°logo de e-commerce com milh√µes de produtos e varia√ß√µes</li>
          <li>Rede social com an√°lise de amigos em comum e influenciadores</li>
          <li>Sistema de logs e m√©tricas de aplica√ß√µes</li>
          <li>Detec√ß√£o de fraude banc√°ria atrav√©s de padr√µes de transa√ß√µes</li>
        </ol>
        <p><strong>b)</strong> √â poss√≠vel usar ambos os bancos em uma mesma aplica√ß√£o? D√™ um exemplo.</p>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 7 - Performance e Otimiza√ß√£o</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p><strong>a)</strong> Explique o conceito de √≠ndices. Como eles melhoram a performance?</p>
        <p><strong>b)</strong> No MongoDB, quando usar √≠ndices compostos?</p>
        <p><strong>c)</strong> No Neo4j, qual √© a import√¢ncia de criar √≠ndices em propriedades frequentemente consultadas?</p>
        <p><strong>d)</strong> Compare o conceito de JOIN em SQL com:</p>
        <ul>
          <li><code>$lookup</code> no MongoDB</li>
          <li>Padr√µes de relacionamento no Neo4j</li>
        </ul>
      </div>

      <div class="theory-question">
        <h4>Quest√£o 8 - Modelagem de Dados</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p>Considere um sistema universit√°rio com as seguintes entidades:</p>
        <ul>
          <li>Alunos (nome, matr√≠cula, email, curso)</li>
          <li>Professores (nome, departamento, especialidade)</li>
          <li>Cursos (nome, departamento, carga hor√°ria)</li>
          <li>Disciplinas (nome, c√≥digo, professor respons√°vel)</li>
          <li>Matr√≠culas (aluno, disciplina, semestre, nota)</li>
        </ul>
        <p><strong>a)</strong> Como voc√™ modelaria esses dados no MongoDB? (estrutura de documentos e cole√ß√µes)</p>
        <p><strong>b)</strong> Como voc√™ modelaria esses dados no Neo4j? (n√≥s, labels e relacionamentos)</p>
        <p><strong>c)</strong> Quais consultas seriam mais eficientes em cada banco?</p>
      </div>
    </div>

    <!-- PARTE 2: EXERC√çCIOS PR√ÅTICOS MONGODB -->
    <div id="parte2" class="section">
      <h2>üçÉ Parte 2: Exerc√≠cios Pr√°ticos MongoDB</h2>
      <p><strong>Contexto:</strong> Use o banco <code>biblioteca</code> com as seguintes cole√ß√µes:</p>
      
      <pre><code class="code-comment">// Estrutura das cole√ß√µes:</code>
<code>db.livros: { 
  _id, titulo, autor, ano_publicacao, genero, 
  editora, isbn, paginas, disponivel 
}

db.usuarios: { 
  _id, nome, email, data_cadastro, 
  endereco: { rua, cidade, estado, cep }, 
  tipo: "aluno" | "professor" | "funcionario" 
}

db.emprestimos: { 
  _id, usuario_id, livro_id, data_emprestimo, 
  data_devolucao_prevista, data_devolucao_real, 
  status: "ativo" | "devolvido" | "atrasado" 
}</code></pre>

      <div class="exercise">
        <h4>Exerc√≠cio 2.1 - Consultas B√°sicas</h4>
        <span class="badge badge-easy">F√°cil</span>
        <p><strong>a)</strong> Liste todos os livros do g√™nero "Fic√ß√£o Cient√≠fica" publicados ap√≥s 2010.</p>
        <p><strong>b)</strong> Encontre todos os usu√°rios da cidade de "Saquarema".</p>
        <p><strong>c)</strong> Conte quantos livros est√£o dispon√≠veis na biblioteca.</p>
        <p><strong>d)</strong> Liste os 10 livros mais recentes ordenados por ano de publica√ß√£o.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 2.2 - Consultas com Agrega√ß√£o</h4>
        <span class="badge badge-medium">M√©dio</span>
        <p><strong>a)</strong> Quantos livros existem por g√™nero? Ordene do maior para o menor.</p>
        <p><strong>b)</strong> Qual √© a m√©dia de p√°ginas dos livros publicados por cada editora?</p>
        <p><strong>c)</strong> Liste os autores que t√™m mais de 3 livros cadastrados.</p>
        <p><strong>d)</strong> Quantos usu√°rios existem de cada tipo (aluno, professor, funcion√°rio)?</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 2.3 - Lookup e Relacionamentos</h4>
        <span class="badge badge-medium">M√©dio</span>
        <p><strong>a)</strong> Liste todos os empr√©stimos ativos com os dados completos do usu√°rio e do livro.</p>
        <p><strong>b)</strong> Encontre os 5 usu√°rios que mais fizeram empr√©stimos (hist√≥rico completo).</p>
        <p><strong>c)</strong> Quais livros nunca foram emprestados?</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 2.4 - KPIs e An√°lises Avan√ßadas</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <p><strong>a)</strong> Calcule a taxa de ocupa√ß√£o da biblioteca: (empr√©stimos ativos / total de livros).</p>
        <p><strong>b)</strong> Liste os livros com empr√©stimos atrasados, incluindo:</p>
        <ul>
          <li>Dados do livro</li>
          <li>Dados do usu√°rio</li>
          <li>Dias de atraso</li>
        </ul>
        <p><strong>c)</strong> Ranking de g√™neros mais populares baseado no n√∫mero de empr√©stimos (n√£o quantidade de livros).</p>
        <p><strong>d)</strong> An√°lise de sazonalidade: quantos empr√©stimos foram feitos em cada m√™s do √∫ltimo ano?</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 2.5 - Opera√ß√µes de Escrita</h4>
        <span class="badge badge-easy">F√°cil</span>
        <p><strong>a)</strong> Insira 3 novos livros na cole√ß√£o.</p>
        <p><strong>b)</strong> Atualize o endere√ßo de um usu√°rio espec√≠fico.</p>
        <p><strong>c)</strong> Marque um empr√©stimo como "devolvido" e registre a data de devolu√ß√£o real.</p>
        <p><strong>d)</strong> Remova todos os usu√°rios que se cadastraram h√° mais de 5 anos e nunca fizeram empr√©stimos.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 2.6 - Desafio Final MongoDB</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <p>Crie uma consulta que retorne um dashboard completo da biblioteca com:</p>
        <ol>
          <li>Total de livros cadastrados</li>
          <li>Total de usu√°rios ativos</li>
          <li>Total de empr√©stimos ativos</li>
          <li>Total de empr√©stimos atrasados</li>
          <li>Top 5 livros mais emprestados</li>
          <li>Top 5 usu√°rios mais ass√≠duos</li>
          <li>G√™nero mais popular</li>
          <li>Taxa m√©dia de devolu√ß√£o no prazo (devolu√ß√µes no prazo / total de devolu√ß√µes)</li>
        </ol>
        <div class="tip">
          üí° <strong>Dica:</strong> Use m√∫ltiplos pipelines com $lookup e $facet para criar um √∫nico resultado agregado.
        </div>
      </div>
    </div>

    <!-- PARTE 3: EXERC√çCIOS PR√ÅTICOS NEO4J -->
    <div id="parte3" class="section">
      <h2>üîó Parte 3: Exerc√≠cios Pr√°ticos Neo4j</h2>
      <p><strong>Contexto:</strong> Construa um grafo de rede social acad√™mica com:</p>
      
      <pre><code class="code-comment">// Estrutura do grafo:</code>
<code>N√≥s (Labels):
- (:Pessoa {nome, idade, email, cidade})
- (:Universidade {nome, cidade, ranking})
- (:Curso {nome, area, duracao_anos})
- (:Artigo {titulo, ano, citacoes})

Relacionamentos:
- (:Pessoa)-[:ESTUDA_EM {inicio, status}]->(:Universidade)
- (:Pessoa)-[:CURSA {semestre}]->(:Curso)
- (:Pessoa)-[:AMIGO_DE {desde}]->(:Pessoa)
- (:Pessoa)-[:PUBLICOU {role}]->(:Artigo)
- (:Artigo)-[:CITA]->(:Artigo)
- (:Pessoa)-[:ORIENTADOR_DE]->(:Pessoa)</code></pre>

      <div class="exercise">
        <h4>Exerc√≠cio 3.1 - Cria√ß√£o de Dados</h4>
        <span class="badge badge-easy">F√°cil</span>
        <p><strong>a)</strong> Crie 5 pessoas com propriedades completas.</p>
        <p><strong>b)</strong> Crie 3 universidades brasileiras.</p>
        <p><strong>c)</strong> Crie relacionamentos de amizade entre pelo menos 3 pares de pessoas.</p>
        <p><strong>d)</strong> Crie relacionamentos de ESTUDA_EM conectando pessoas √†s universidades.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 3.2 - Consultas B√°sicas</h4>
        <span class="badge badge-easy">F√°cil</span>
        <p><strong>a)</strong> Liste todas as pessoas que estudam na "Universidade de Vassouras".</p>
        <p><strong>b)</strong> Encontre todos os amigos de uma pessoa espec√≠fica.</p>
        <p><strong>c)</strong> Liste todos os cursos da √°rea de "Tecnologia".</p>
        <p><strong>d)</strong> Conte quantas pessoas existem no grafo.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 3.3 - Padr√µes e Caminhos</h4>
        <span class="badge badge-medium">M√©dio</span>
        <p><strong>a)</strong> Encontre amigos em comum entre duas pessoas espec√≠ficas.</p>
        <p><strong>b)</strong> Liste todas as pessoas que estudam na mesma universidade que uma pessoa espec√≠fica.</p>
        <p><strong>c)</strong> Encontre o caminho mais curto entre duas pessoas atrav√©s de amizades.</p>
        <p><strong>d)</strong> Liste pessoas que s√£o amigas de amigos (2¬∫ grau) mas n√£o s√£o amigas diretas.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 3.4 - An√°lise de Rede Social</h4>
        <span class="badge badge-medium">M√©dio</span>
        <p><strong>a)</strong> Quem tem mais amigos na rede? (ranking de popularidade)</p>
        <p><strong>b)</strong> Encontre "influenciadores": pessoas com muitas conex√µes que conectam grupos diferentes.</p>
        <p><strong>c)</strong> Identifique comunidades: grupos de pessoas da mesma universidade que s√£o amigas entre si.</p>
        <p><strong>d)</strong> Calcule o grau m√©dio de separa√ß√£o na rede (m√©dia de passos entre quaisquer duas pessoas).</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 3.5 - Rede Acad√™mica</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <p><strong>a)</strong> Encontre pesquisadores que publicaram artigos juntos (coautores).</p>
        <p><strong>b)</strong> Liste artigos mais citados e seus autores.</p>
        <p><strong>c)</strong> Encontre cadeias de cita√ß√µes: Artigo A cita B, que cita C, etc.</p>
        <p><strong>d)</strong> Identifique orientadores mais prol√≠ficos (que t√™m mais orientandos que tamb√©m publicam).</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 3.6 - Sistema de Recomenda√ß√£o</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <p>Crie consultas para um sistema de recomenda√ß√£o:</p>
        <p><strong>a)</strong> Recomendar amigos: pessoas que t√™m muitos amigos em comum mas ainda n√£o s√£o amigos.</p>
        <p><strong>b)</strong> Recomendar cursos: baseado nos cursos que amigos est√£o fazendo.</p>
        <p><strong>c)</strong> Recomendar artigos para ler: baseado em cita√ß√µes de artigos que voc√™ publicou.</p>
        <p><strong>d)</strong> Recomendar orientadores: professores que orientam alunos similares a voc√™.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 3.7 - Desafio Final Neo4j</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <p>Implemente uma an√°lise completa de rede social:</p>
        <ol>
          <li>Identifique os 5 n√≥s mais centrais (maior n√∫mero de conex√µes)</li>
          <li>Encontre clusters/comunidades (grupos densamente conectados)</li>
          <li>Detecte "pontes" (pessoas que conectam comunidades diferentes)</li>
          <li>Calcule m√©tricas de rede:
            <ul>
              <li>Densidade da rede</li>
              <li>Coeficiente de clustering</li>
              <li>Di√¢metro da rede</li>
            </ul>
          </li>
          <li>Visualize o grafo destacando comunidades com cores diferentes</li>
        </ol>
        <div class="tip">
          üí° <strong>Dica:</strong> Use algoritmos da biblioteca GDS (Graph Data Science) do Neo4j para c√°lculos avan√ßados.
        </div>
      </div>
    </div>

    <!-- PARTE 4: EXERC√çCIOS COMPARATIVOS -->
    <div id="parte4" class="section">
      <h2>‚öñÔ∏è Parte 4: Exerc√≠cios Comparativos e Integrados</h2>
      
      <div class="exercise">
        <h4>Exerc√≠cio 4.1 - Mesma Consulta, Dois Bancos</h4>
        <span class="badge badge-medium">M√©dio</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p>Para o cen√°rio de um sistema universit√°rio, implemente a mesma consulta nos dois bancos:</p>
        <p><strong>"Encontre todos os alunos que cursam Engenharia, moram em Saquarema e t√™m amigos que cursam Medicina"</strong></p>
        <p><strong>a)</strong> Escreva a consulta em MongoDB (usando $lookup).</p>
        <p><strong>b)</strong> Escreva a consulta em Neo4j (usando MATCH com padr√µes).</p>
        <p><strong>c)</strong> Compare a complexidade e legibilidade de cada solu√ß√£o.</p>
        <p><strong>d)</strong> Qual banco seria mais perform√°tico para esta consulta? Por qu√™?</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 4.2 - Arquitetura H√≠brida</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p>Projete uma arquitetura que usa ambos os bancos para um sistema de e-commerce com rede social:</p>
        <p><strong>MongoDB armazenar√°:</strong></p>
        <ul>
          <li>Produtos (nome, descri√ß√£o, pre√ßo, estoque, imagens, avalia√ß√µes)</li>
          <li>Pedidos (itens, valores, endere√ßo de entrega, status)</li>
          <li>Usu√°rios (dados cadastrais, hist√≥rico de compras)</li>
        </ul>
        <p><strong>Neo4j armazenar√°:</strong></p>
        <ul>
          <li>Relacionamentos sociais (amizades, seguidores)</li>
          <li>Similaridade entre produtos</li>
          <li>Padr√µes de compra (usu√°rios que compraram X tamb√©m compraram Y)</li>
        </ul>
        <p><strong>Desafios:</strong></p>
        <p><strong>a)</strong> Como sincronizar IDs entre os dois bancos?</p>
        <p><strong>b)</strong> Implemente uma consulta de recomenda√ß√£o que use dados dos dois bancos.</p>
        <p><strong>c)</strong> Como voc√™ lidaria com consist√™ncia de dados?</p>
        <p><strong>d)</strong> Desenhe o fluxo de uma opera√ß√£o de "compra" que atualiza ambos os bancos.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 4.3 - Migra√ß√£o de Dados</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p>Voc√™ precisa migrar parte dos dados de um sistema que usa apenas MongoDB para incluir tamb√©m Neo4j:</p>
        <p><strong>a)</strong> Escreva um script Python que:</p>
        <ul>
          <li>L√™ documentos de uma cole√ß√£o MongoDB</li>
          <li>Transforma os dados para o modelo de grafo</li>
          <li>Insere n√≥s e relacionamentos no Neo4j</li>
        </ul>
        <p><strong>b)</strong> Como voc√™ trataria documentos aninhados do MongoDB?</p>
        <p><strong>c)</strong> Como garantir que a migra√ß√£o n√£o crie duplicatas?</p>
        <p><strong>d)</strong> Implemente valida√ß√µes e rollback em caso de erro.</p>
      </div>

      <div class="exercise">
        <h4>Exerc√≠cio 4.4 - An√°lise de Performance</h4>
        <span class="badge badge-hard">Dif√≠cil</span>
        <span class="badge badge-both">MongoDB + Neo4j</span>
        <p>Realize testes de performance comparativos:</p>
        <p><strong>a)</strong> Me√ßa o tempo de execu√ß√£o das seguintes opera√ß√µes em ambos os bancos:</p>
        <ol>
          <li>Inserir 10.000 registros</li>
          <li>Busca simples por ID</li>
          <li>Busca com 3 n√≠veis de relacionamento/lookup</li>
          <li>Agrega√ß√£o com GROUP BY</li>
          <li>Atualiza√ß√£o em massa</li>
        </ol>
        <p><strong>b)</strong> Crie gr√°ficos comparativos dos resultados.</p>
        <p><strong>c)</strong> Explique as diferen√ßas de performance encontradas.</p>
        <p><strong>d)</strong> Proponha otimiza√ß√µes para cada banco.</p>
      </div>
    </div>

    <!-- GABARITO -->
    <div id="gabarito" class="section">
      <h2>‚úÖ Gabarito e Explica√ß√µes</h2>
      
      <h3>Parte 1: Quest√µes Te√≥ricas</h3>
      
      <div class="theory-question">
        <h4>Resposta - Quest√£o 1</h4>
        <p><strong>a)</strong> Bancos SQL usam estrutura tabular r√≠gida com schemas fixos e relacionamentos via chaves estrangeiras. NoSQL permite estruturas flex√≠veis, escalabilidade horizontal e diferentes modelos de dados.</p>
        <p><strong>b)</strong> Categorias NoSQL:</p>
        <ul>
          <li><strong>Documentos:</strong> MongoDB, CouchDB</li>
          <li><strong>Chave-Valor:</strong> Redis, DynamoDB</li>
          <li><strong>Colunar:</strong> Cassandra, HBase</li>
          <li><strong>Grafos:</strong> Neo4j, ArangoDB</li>
        </ul>
        <p><strong>c)</strong> MongoDB √© orientado a documentos e Neo4j √© orientado a grafos.</p>
      </div>

      <div class="theory-question">
        <h4>Resposta - Quest√£o 2</h4>
        <p><strong>a)</strong> Documento √© um conjunto de pares chave-valor estruturado em JSON/BSON, similar a um objeto.</p>
        <p><strong>b)</strong> Cole√ß√£o agrupa documentos mas n√£o imp√µe estrutura r√≠gida; tabela SQL requer schema fixo.</p>
        <p><strong>c)</strong> Schema flex√≠vel significa que documentos na mesma cole√ß√£o podem ter campos diferentes.</p>
      </div>

      <h3>Parte 2: MongoDB - Exemplos de Solu√ß√£o</h3>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 2.1</h4>
        <pre><code class="code-comment">// a) Livros de Fic√ß√£o Cient√≠fica ap√≥s 2010</code>
<code>db.livros.find({
  genero: "Fic√ß√£o Cient√≠fica",
  ano_publicacao: { $gt: 2010 }
})</code></pre>

        <pre><code class="code-comment">// b) Usu√°rios de Saquarema</code>
<code>db.usuarios.find({
  "endereco.cidade": "Saquarema"
})</code></pre>

        <pre><code class="code-comment">// c) Contar livros dispon√≠veis</code>
<code>db.livros.countDocuments({
  disponivel: true
})</code></pre>

        <pre><code class="code-comment">// d) 10 livros mais recentes</code>
<code>db.livros.find()
  .sort({ ano_publicacao: -1 })
  .limit(10)</code></pre>
      </div>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 2.2</h4>
        <pre><code class="code-comment">// a) Livros por g√™nero</code>
<code>db.livros.aggregate([
  { $group: { 
      _id: "$genero", 
      total: { $sum: 1 } 
  }},
  { $sort: { total: -1 } }
])</code></pre>

        <pre><code class="code-comment">// b) M√©dia de p√°ginas por editora</code>
<code>db.livros.aggregate([
  { $group: { 
      _id: "$editora", 
      media_paginas: { $avg: "$paginas" } 
  }},
  { $sort: { media_paginas: -1 } }
])</code></pre>

        <pre><code class="code-comment">// c) Autores com mais de 3 livros</code>
<code>db.livros.aggregate([
  { $group: { 
      _id: "$autor", 
      total_livros: { $sum: 1 } 
  }},
  { $match: { total_livros: { $gt: 3 } }},
  { $sort: { total_livros: -1 } }
])</code></pre>
      </div>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 2.3</h4>
        <pre><code class="code-comment">// a) Empr√©stimos ativos com dados completos</code>
<code>db.emprestimos.aggregate([
  { $match: { status: "ativo" }},
  { $lookup: {
      from: "usuarios",
      localField: "usuario_id",
      foreignField: "_id",
      as: "usuario"
  }},
  { $lookup: {
      from: "livros",
      localField: "livro_id",
      foreignField: "_id",
      as: "livro"
  }},
  { $unwind: "$usuario" },
  { $unwind: "$livro" }
])</code></pre>

        <pre><code class="code-comment">// b) Top 5 usu√°rios que mais emprestaram</code>
<code>db.emprestimos.aggregate([
  { $group: {
      _id: "$usuario_id",
      total_emprestimos: { $sum: 1 }
  }},
  { $sort: { total_emprestimos: -1 }},
  { $limit: 5 },
  { $lookup: {
      from: "usuarios",
      localField: "_id",
      foreignField: "_id",
      as: "usuario"
  }},
  { $unwind: "$usuario" }
])</code></pre>

        <pre><code class="code-comment">// c) Livros nunca emprestados</code>
<code>db.livros.aggregate([
  { $lookup: {
      from: "emprestimos",
      localField: "_id",
      foreignField: "livro_id",
      as: "emprestimos"
  }},
  { $match: { emprestimos: { $size: 0 } }},
  { $project: { emprestimos: 0 }}
])</code></pre>
      </div>

      <h3>Parte 3: Neo4j - Exemplos de Solu√ß√£o</h3>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 3.1</h4>
        <pre><code class="code-comment">// a) Criar 5 pessoas</code>
<code>CREATE 
  (p1:Pessoa {nome: "Ana Silva", idade: 22, email: "ana@email.com", cidade: "Saquarema"}),
  (p2:Pessoa {nome: "Bruno Costa", idade: 24, email: "bruno@email.com", cidade: "Rio de Janeiro"}),
  (p3:Pessoa {nome: "Carla Santos", idade: 21, email: "carla@email.com", cidade: "Niter√≥i"}),
  (p4:Pessoa {nome: "Diego Ramos", idade: 35, email: "diego@email.com", cidade: "Saquarema"}),
  (p5:Pessoa {nome: "Elena Souza", idade: 23, email: "elena@email.com", cidade: "Cabo Frio"})</code></pre>

        <pre><code class="code-comment">// b) Criar 3 universidades</code>
<code>CREATE
  (u1:Universidade {nome: "Universidade de Vassouras", cidade: "Saquarema", ranking: 15}),
  (u2:Universidade {nome: "UFRJ", cidade: "Rio de Janeiro", ranking: 1}),
  (u3:Universidade {nome: "UFF", cidade: "Niter√≥i", ranking: 5})</code></pre>

        <pre><code class="code-comment">// c) Criar amizades</code>
<code>MATCH 
  (p1:Pessoa {nome: "Ana Silva"}),
  (p2:Pessoa {nome: "Bruno Costa"}),
  (p3:Pessoa {nome: "Carla Santos"})
CREATE 
  (p1)-[:AMIGO_DE {desde: 2020}]->(p2),
  (p2)-[:AMIGO_DE {desde: 2021}]->(p3),
  (p1)-[:AMIGO_DE {desde: 2019}]->(p3)</code></pre>
      </div>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 3.2</h4>
        <pre><code class="code-comment">// a) Pessoas que estudam na Universidade de Vassouras</code>
<code>MATCH (p:Pessoa)-[:ESTUDA_EM]->(u:Universidade {nome: "Universidade de Vassouras"})
RETURN p.nome, p.email</code></pre>

        <pre><code class="code-comment">// b) Amigos de uma pessoa</code>
<code>MATCH (p:Pessoa {nome: "Ana Silva"})-[:AMIGO_DE]-(amigo:Pessoa)
RETURN amigo.nome, amigo.cidade</code></pre>

        <pre><code class="code-comment">// c) Cursos de Tecnologia</code>
<code>MATCH (c:Curso {area: "Tecnologia"})
RETURN c.nome, c.duracao_anos</code></pre>

        <pre><code class="code-comment">// d) Contar pessoas</code>
<code>MATCH (p:Pessoa)
RETURN count(p) AS total_pessoas</code></pre>
      </div>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 3.3</h4>
        <pre><code class="code-comment">// a) Amigos em comum</code>
<code>MATCH (p1:Pessoa {nome: "Ana Silva"})-[:AMIGO_DE]-(comum:Pessoa)-[:AMIGO_DE]-(p2:Pessoa {nome: "Carla Santos"})
WHERE p1 <> p2
RETURN comum.nome, comum.cidade</code></pre>

        <pre><code class="code-comment">// b) Colegas de universidade</code>
<code>MATCH (p1:Pessoa {nome: "Ana Silva"})-[:ESTUDA_EM]->(u:Universidade)<-[:ESTUDA_EM]-(p2:Pessoa)
WHERE p1 <> p2
RETURN p2.nome, u.nome AS universidade</code></pre>

        <pre><code class="code-comment">// c) Caminho mais curto</code>
<code>MATCH path = shortestPath(
  (p1:Pessoa {nome: "Ana Silva"})-[:AMIGO_DE*]-(p2:Pessoa {nome: "Elena Souza"})
)
RETURN path, length(path) AS grau_separacao</code></pre>

        <pre><code class="code-comment">// d) Amigos de amigos (2¬∫ grau)</code>
<code>MATCH (eu:Pessoa {nome: "Ana Silva"})-[:AMIGO_DE]-(amigo)-[:AMIGO_DE]-(amigo2:Pessoa)
WHERE NOT (eu)-[:AMIGO_DE]-(amigo2) AND eu <> amigo2
RETURN DISTINCT amigo2.nome, count(amigo) AS amigos_em_comum
ORDER BY amigos_em_comum DESC</code></pre>
      </div>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 3.4</h4>
        <pre><code class="code-comment">// a) Ranking de popularidade</code>
<code>MATCH (p:Pessoa)-[:AMIGO_DE]-(amigo:Pessoa)
RETURN p.nome, count(amigo) AS total_amigos
ORDER BY total_amigos DESC
LIMIT 10</code></pre>

        <pre><code class="code-comment">// c) Comunidades (mesma universidade e amigos)</code>
<code>MATCH (p1:Pessoa)-[:ESTUDA_EM]->(u:Universidade)<-[:ESTUDA_EM]-(p2:Pessoa)
WHERE (p1)-[:AMIGO_DE]-(p2)
RETURN u.nome AS universidade, 
       collect(DISTINCT p1.nome) AS membros,
       count(*) AS conexoes
ORDER BY conexoes DESC</code></pre>
      </div>

      <h3>Parte 4: Exerc√≠cios Comparativos</h3>

      <div class="exercise">
        <h4>Solu√ß√£o - Exerc√≠cio 4.1</h4>
        <p><strong>MongoDB:</strong></p>
        <pre><code>db.alunos.aggregate([
  { $match: { "endereco.cidade": "Saquarema" }},
  { $lookup: {
      from: "cursos",
      localField: "curso_id",
      foreignField: "_id",
      as: "curso"
  }},
  { $unwind: "$curso" },
  { $match: { "curso.nome": /Engenharia/i }},
  { $lookup: {
      from: "amizades",
      localField: "_id",
      foreignField: "aluno_id",
      as: "amigos"
  }},
  { $lookup: {
      from: "alunos",
      localField: "amigos.amigo_id",
      foreignField: "_id",
      as: "dados_amigos"
  }},
  { $lookup: {
      from: "cursos",
      localField: "dados_amigos.curso_id",
      foreignField: "_id",
      as: "cursos_amigos"
  }},
  { $match: { "cursos_amigos.nome": /Medicina/i }}
])</code></pre>

        <p><strong>Neo4j:</strong></p>
        <pre><code>MATCH (aluno:Pessoa)-[:CURSA]->(c1:Curso)
WHERE aluno.cidade = "Saquarema" AND c1.nome =~ ".*Engenharia.*"
MATCH (aluno)-[:AMIGO_DE]-(amigo:Pessoa)-[:CURSA]->(c2:Curso)
WHERE c2.nome =~ ".*Medicina.*"
RETURN DISTINCT aluno.nome, aluno.email</code></pre>

        <p><strong>An√°lise:</strong> A consulta Neo4j √© mais concisa e leg√≠vel. MongoDB requer m√∫ltiplos $lookup e √© mais verboso. Neo4j √© mais perform√°tico para consultas de relacionamentos complexos.</p>
      </div>

      <div class="warning">
        ‚ö†Ô∏è <strong>Importante:</strong> Este gabarito apresenta apenas solu√ß√µes exemplares. Existem m√∫ltiplas formas corretas de resolver cada exerc√≠cio. O importante √© a l√≥gica aplicada e o entendimento dos conceitos!
      </div>
    </div>

    <!-- RECURSOS ADICIONAIS -->
    <div class="section">
      <h2>üìñ Recursos para Estudo</h2>
      
      <h3>MongoDB</h3>
      <ul>
        <li><strong>Documenta√ß√£o Oficial:</strong> <a href="https://docs.mongodb.com" target="_blank" style="color: #00ffaa;">docs.mongodb.com</a></li>
        <li><strong>MongoDB University:</strong> Cursos gratuitos online</li>
        <li><strong>Aggregation Pipeline Builder:</strong> Ferramenta visual no Compass</li>
      </ul>

      <h3>Neo4j</h3>
      <ul>
        <li><strong>Documenta√ß√£o Oficial:</strong> <a href="https://neo4j.com/docs" target="_blank" style="color: #00ffaa;">neo4j.com/docs</a></li>
        <li><strong>GraphAcademy:</strong> Cursos gratuitos e certifica√ß√µes</li>
        <li><strong>Neo4j Browser:</strong> Interface visual (localhost:7474)</li>
        <li><strong>Cypher Refcard:</strong> Guia r√°pido de refer√™ncia</li>
      </ul>

      <h3>Pr√°ticas Recomendadas</h3>
      <ul>
        <li>‚úÖ Use o MongoDB Compass para visualizar documentos</li>
        <li>‚úÖ Use o Neo4j Browser para visualizar grafos</li>
        <li>‚úÖ Teste consultas em ambientes de desenvolvimento primeiro</li>
        <li>‚úÖ Sempre crie √≠ndices para propriedades frequentemente consultadas</li>
        <li>‚úÖ Documente sua modelagem de dados</li>
        <li>‚úÖ Use par√¢metros em consultas para evitar injection</li>
      </ul>
    </div>

    <div class="footer">
      <p><strong>üìö Disciplina:</strong> Banco de Dados N√£o Relacional</p>
      <p><strong>üë®‚Äçüè´ Professor:</strong> Diego Ramos In√°cio</p>
      <p><strong>üéì Institui√ß√£o:</strong> Universidade de Vassouras - Campus Saquarema</p>
      <p style="margin-top: 1rem; color: #60d9ff;">
        üí° <em>D√∫vidas? Pratique no MongoDB Atlas (cloud.mongodb.com) e Neo4j Sandbox (sandbox.neo4j.com)</em>
      </p>
    </div>
  </div>
</body>
</html>